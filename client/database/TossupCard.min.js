import account from"../scripts/accounts.js";import{stringifyTossup}from"./stringify.js";import QuestionCard from"../scripts/components/QuestionCard.min.js";export default function TossupCard({tossup:a,highlightedTossup:b,hideAnswerline:c,hideCardFooter:d,topRightComponent:e,fontSize:f=16}){const g=a._id;return/*#__PURE__*/React.createElement(QuestionCard,{onClickHeader:function(){const b=stringifyTossup(a);navigator.clipboard.writeText(b);const c=new bootstrap.Toast(document.getElementById("clipboard-toast"));c.show()},question:a,topRightComponent:e},/*#__PURE__*/React.createElement("div",{className:"card-body",style:{fontSize:`${f}px`}},/*#__PURE__*/React.createElement("span",{style:{fontWeight:"<b>"===a.question.substring(0,3)?"bold":"normal"}},a.number,". "),/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:b.question}}),/*#__PURE__*/React.createElement("hr",{className:"my-3"}),/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("b",null,"ANSWER:")," ",/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:c?"":b?.answer}}))),/*#__PURE__*/React.createElement("div",{className:`card-footer d-flex justify-content-between ${d&&"d-none"}`},/*#__PURE__*/React.createElement("div",{className:"clickable flex-grow-1",onClick:function(){fetch("/auth/question-stats/single-tossup?"+new URLSearchParams({tossup_id:g})).then(a=>{switch(a.status){case 401:throw document.getElementById("tossup-stats-body").textContent="You need to make an account with a verified email to view question stats.",account.deleteUsername(),new Error("Unauthenticated");case 403:throw document.getElementById("tossup-stats-body").textContent="You need verify your account email to view question stats.",new Error("Forbidden")}return a}).then(a=>a.json()).then(a=>{document.getElementById("tossup-stats-question-id").value=g;const{stats:b}=a;if(!b)return void(document.getElementById("tossup-stats-body").textContent="No stats found for this question.");const c=0<b.numCorrect?b.totalCorrectCelerity/b.numCorrect:0,d=[["TUH",b.count],["15s",b["15s"]],["10s",b["10s"]],["-5s",b["-5s"]],["Average celerity",c.toFixed(3)],["Total points",b.totalPoints],["PPTU",b.pptu.toFixed(2)]],e=document.createElement("ul");e.className="list-group";for(const[b,c]of d){const a=document.createElement("li");a.className="list-group-item d-flex justify-content-between align-items-center",a.innerHTML=`${b} <span>${c}</span>`,e.appendChild(a)}document.getElementById("tossup-stats-body").textContent="",document.getElementById("tossup-stats-body").appendChild(e)}).catch(a=>{console.error("Error:",a)})},"data-bs-toggle":"modal","data-bs-target":"#tossup-stats-modal"},/*#__PURE__*/React.createElement("small",{className:"text-muted"},a.packet.name?"Packet "+a.packet.name:/*#__PURE__*/React.createElement("span",null,"\xA0"))),/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("small",{className:"text-muted"},/*#__PURE__*/React.createElement("a",{href:`/tools/db-explorer/tossup?_id=${g}`,onClick:a=>a.stopPropagation()},"Link to tossup"),/*#__PURE__*/React.createElement("span",null," | "),/*#__PURE__*/React.createElement("a",{href:"#",onClick:function(){document.getElementById("report-question-id").value=g},id:`report-question-${g}`,"data-bs-toggle":"modal","data-bs-target":"#report-question-modal"},"Report Question")))))}
import account from"../scripts/accounts.js";import{stringifyBonus}from"./stringify.js";import getBonusPartLabel from"../scripts/utilities/get-bonus-part-label.js";import QuestionCard from"../scripts/components/QuestionCard.min.js";export default function BonusCard({bonus:a,highlightedBonus:b,hideAnswerlines:c,hideCardFooter:d,topRightComponent:e,fontSize:f=16}){const g=a._id,h=a.parts.length,j=[];for(let g=0;g<h;g++)j.push(g);return/*#__PURE__*/React.createElement(QuestionCard,{onClickHeader:function(){const b=stringifyBonus(a);navigator.clipboard.writeText(b);const c=new bootstrap.Toast(document.getElementById("clipboard-toast"));c.show()},question:a,topRightComponent:e},/*#__PURE__*/React.createElement("div",{className:"card-body",style:{fontSize:`${f}px`}},/*#__PURE__*/React.createElement("span",{style:{fontWeight:"<b>"===a.leadin.substring(0,3)?"bold":"normal"}},a.number,". "),/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:b.leadin}}),j.map(d=>/*#__PURE__*/React.createElement("div",{key:`${a._id}-${d}`},/*#__PURE__*/React.createElement("hr",null),/*#__PURE__*/React.createElement("p",null,getBonusPartLabel(a,d)," ",/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:b.parts[d]}})),/*#__PURE__*/React.createElement("b",null,"ANSWER: "),/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:c?"":b?.answers[d]}})))),/*#__PURE__*/React.createElement("div",{className:`card-footer d-flex justify-content-between ${d&&"d-none"}`},/*#__PURE__*/React.createElement("div",{className:"clickable flex-grow-1",onClick:function(){fetch("/auth/question-stats/single-bonus?"+new URLSearchParams({bonus_id:g})).then(a=>{switch(a.status){case 401:throw document.getElementById("bonus-stats-body").textContent="You need to make an account with a verified email to view question stats.",account.deleteUsername(),new Error("Unauthenticated");case 403:throw document.getElementById("bonus-stats-body").textContent="You need verify your account email to view question stats.",new Error("Forbidden")}return a}).then(a=>a.json()).then(a=>{document.getElementById("bonus-stats-question-id").value=g;const{stats:b}=a;if(!b)return void(document.getElementById("bonus-stats-body").textContent="No stats found for this question.");const c=[["BH",b.count],["1st part",(10*b.part1).toFixed(2)+" pts"],["2nd part",(10*b.part2).toFixed(2)+" pts"],["3rd part",(10*b.part3).toFixed(2)+" pts"],["30s/20s/10s/0s",`${b["30s"]}/${b["20s"]}/${b["10s"]}/${b["0s"]}`],["Total points",b.totalPoints],["PPB",b.ppb.toFixed(2)]],d=document.createElement("ul");d.className="list-group";for(const[b,e]of c){const a=document.createElement("li");a.className="list-group-item d-flex justify-content-between align-items-center",a.innerHTML=`${b} <span>${e}</span>`,d.appendChild(a)}document.getElementById("bonus-stats-body").textContent="",document.getElementById("bonus-stats-body").appendChild(d)}).catch(a=>{console.error("Error:",a)})},"data-bs-toggle":"modal","data-bs-target":"#bonus-stats-modal"},/*#__PURE__*/React.createElement("small",{className:"text-muted"},a.packet.name?"Packet "+a.packet.name:/*#__PURE__*/React.createElement("span",null,"\xA0"))),/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("small",{className:"text-muted"},/*#__PURE__*/React.createElement("a",{href:`/tools/db-explorer/bonus?_id=${g}`,onClick:a=>a.stopPropagation()},"Link to bonus"),/*#__PURE__*/React.createElement("span",null," | "),/*#__PURE__*/React.createElement("a",{href:"#",onClick:function(){document.getElementById("report-question-id").value=g},id:`report-question-${g}`,"data-bs-toggle":"modal","data-bs-target":"#report-question-modal"},"Report Question")))))}